# rlfinalproj


## 목적
스마일 투자전략을 통해 종목을 선정하고 DQN을 활용하여 단순 Buy and Hold 했을 때의 결과와 비교해본다.

### 환경
Name                    Version                   Build  Channel
absl-py                   1.3.0                    pypi_0    pypi
anyio                     3.5.0            py37haa95532_0
argon2-cffi               21.3.0             pyhd3eb1b0_0
argon2-cffi-bindings      21.2.0           py37h2bbff1b_0
astunparse                1.6.3                    pypi_0    pypi
attrs                     22.1.0           py37haa95532_0
backcall                  0.2.0              pyhd3eb1b0_0
beautifulsoup4            4.11.1           py37haa95532_0
blas                      1.0                         mkl
bleach                    4.1.0              pyhd3eb1b0_0
brotlipy                  0.7.0           py37h2bbff1b_1003
ca-certificates           2022.10.11           haa95532_0
cachetools                5.2.0                    pypi_0    pypi
certifi                   2022.12.7        py37haa95532_0
cffi                      1.15.1           py37h2bbff1b_3
charset-normalizer        2.1.1                    pypi_0    pypi
colorama                  0.4.5            py37haa95532_0
cryptography              38.0.1           py37h21b164f_0
cudatoolkit               10.0.130                      0
debugpy                   1.5.1            py37hd77b12b_0
decorator                 5.1.1              pyhd3eb1b0_0
defusedxml                0.7.1              pyhd3eb1b0_0
entrypoints               0.4              py37haa95532_0
fftw                      3.3.9                h2bbff1b_1
flatbuffers               22.12.6                  pypi_0    pypi
flit-core                 3.6.0              pyhd3eb1b0_0
freetype                  2.12.1               ha860e81_0
gast                      0.4.0                    pypi_0    pypi
google-auth               2.15.0                   pypi_0    pypi
google-auth-oauthlib      0.4.6                    pypi_0    pypi
google-pasta              0.2.0                    pypi_0    pypi
grpcio                    1.51.1                   pypi_0    pypi
gym                       0.9.4                    pypi_0    pypi
h5py                      3.7.0                    pypi_0    pypi
icc_rt                    2022.1.0             h6049295_2
idna                      3.4              py37haa95532_0
importlib-metadata        5.2.0                    pypi_0    pypi
importlib_metadata        4.11.3               hd3eb1b0_0
importlib_resources       5.2.0              pyhd3eb1b0_1
intel-openmp              2021.4.0          haa95532_3556
ipykernel                 6.15.2           py37haa95532_0
ipython                   7.31.1           py37haa95532_1
ipython_genutils          0.2.0              pyhd3eb1b0_1
jedi                      0.18.1           py37haa95532_1
jinja2                    3.1.2            py37haa95532_0
joblib                    1.1.1            py37haa95532_0
jpeg                      9e                   h2bbff1b_0
jsonschema                4.16.0           py37haa95532_0
jupyter_client            7.4.7            py37haa95532_0
jupyter_core              4.11.2           py37haa95532_0
jupyter_server            1.18.1           py37haa95532_0
jupyterlab_pygments       0.1.2                      py_0
keras                     2.11.0                   pypi_0    pypi
lerc                      3.0                  hd77b12b_0
libclang                  14.0.6                   pypi_0    pypi
libdeflate                1.8                  h2bbff1b_5
libiconv                  1.16                 h2bbff1b_2
libpng                    1.6.37               h2a8f88b_0
libsodium                 1.0.18               h62dcd97_0
libtiff                   4.4.0                h8a3f274_2
libuv                     1.40.0               he774522_0
libwebp                   1.2.4                h2bbff1b_0
libwebp-base              1.2.4                h2bbff1b_0
libxml2                   2.9.14               h0ad7f3c_0
libxslt                   1.1.35               h2bbff1b_0
lxml                      4.9.1            py37h1985fb9_0
lz4-c                     1.9.4                h2bbff1b_0
markdown                  3.4.1                    pypi_0    pypi
markupsafe                2.1.1            py37h2bbff1b_0
matplotlib-inline         0.1.6            py37haa95532_0
mistune                   0.8.4           py37hfa6e2cd_1001
mkl                       2021.4.0           haa95532_640
mkl-service               2.4.0            py37h2bbff1b_0
mkl_fft                   1.3.1            py37h277e83a_0
mkl_random                1.2.2            py37hf11a4ad_0
nb_conda                  2.2.1                    py37_0
nb_conda_kernels          2.3.1            py37haa95532_0
nbclassic                 0.4.8            py37haa95532_0
nbclient                  0.5.13           py37haa95532_0
nbconvert                 6.5.4            py37haa95532_0
nbformat                  5.7.0            py37haa95532_0
nest-asyncio              1.5.5            py37haa95532_0
notebook                  6.5.2            py37haa95532_0
notebook-shim             0.2.2            py37haa95532_0
numpy                     1.21.6                   pypi_0    pypi
numpy-base                1.21.5           py37hca35cd5_3
oauthlib                  3.2.2                    pypi_0    pypi
openssl                   1.1.1s               h2bbff1b_0
opt-einsum                3.3.0                    pypi_0    pypi
packaging                 22.0                     pypi_0    pypi
pandas                    1.3.5                    pypi_0    pypi
pandocfilters             1.5.0              pyhd3eb1b0_0
parso                     0.8.3              pyhd3eb1b0_0
pickleshare               0.7.5           pyhd3eb1b0_1003
pillow                    9.3.0            py37hdc2b20a_1
pip                       22.3.1           py37haa95532_0
pkgutil-resolve-name      1.3.10           py37haa95532_0
prometheus_client         0.14.1           py37haa95532_0
prompt-toolkit            3.0.20             pyhd3eb1b0_0
protobuf                  3.19.6                   pypi_0    pypi
psutil                    5.9.0            py37h2bbff1b_0
pyasn1                    0.4.8                    pypi_0    pypi
pyasn1-modules            0.2.8                    pypi_0    pypi
pycparser                 2.21               pyhd3eb1b0_0
pyglet                    2.0.2.1                  pypi_0    pypi
pygments                  2.11.2             pyhd3eb1b0_0
pyopenssl                 22.0.0             pyhd3eb1b0_0
pyparsing                 3.0.9            py37haa95532_0
pyrsistent                0.18.0           py37h196d8e1_0
pysocks                   1.7.1                    py37_1
python                    3.7.15               h6244533_1
python-dateutil           2.8.2              pyhd3eb1b0_0
python-fastjsonschema     2.16.2           py37haa95532_0
pytorch                   1.13.1              py3.7_cpu_0    pytorch
pytorch-mutex             1.0                         cpu    pytorch
pytz                      2022.7                   pypi_0    pypi
pywin32                   305              py37h2bbff1b_0
pywinpty                  2.0.2            py37h5da7b33_0
pyzmq                     23.2.0           py37hd77b12b_0
requests                  2.28.1           py37haa95532_0
requests-oauthlib         1.3.1                    pypi_0    pypi
rsa                       4.9                      pypi_0    pypi
scikit-learn              1.0.2            py37hf11a4ad_1
scipy                     1.7.3            py37h7a0a035_2
send2trash                1.8.0              pyhd3eb1b0_1
setuptools                65.5.0           py37haa95532_0
six                       1.16.0             pyhd3eb1b0_1
sklearn                   0.0.post1                pypi_0    pypi
sniffio                   1.2.0            py37haa95532_1
soupsieve                 2.3.2.post1      py37haa95532_0
sqlite                    3.40.0               h2bbff1b_0
tensorboard               2.11.0                   pypi_0    pypi
tensorboard-data-server   0.6.1                    pypi_0    pypi
tensorboard-plugin-wit    1.8.1                    pypi_0    pypi
tensorflow                2.11.0                   pypi_0    pypi
tensorflow-estimator      2.11.0                   pypi_0    pypi
tensorflow-intel          2.11.0                   pypi_0    pypi
tensorflow-io-gcs-filesystem 0.29.0                   pypi_0    pypi
termcolor                 2.1.1                    pypi_0    pypi
terminado                 0.13.1           py37haa95532_0
threadpoolctl             2.2.0              pyh0d69192_0
tinycss2                  1.2.1            py37haa95532_0
tk                        8.6.12               h2bbff1b_0
torchaudio                0.13.1                 py37_cpu    pytorch
torchvision               0.14.1                 py37_cpu    pytorch
tornado                   6.2              py37h2bbff1b_0
traitlets                 5.7.1            py37haa95532_0
typing-extensions         4.4.0            py37haa95532_0
typing_extensions         4.4.0            py37haa95532_0
urllib3                   1.26.13          py37haa95532_0
vc                        14.2                 h21ff451_1
vs2015_runtime            14.27.29016          h5e58377_2
wcwidth                   0.2.5              pyhd3eb1b0_0
webencodings              0.5.1                    py37_1
websocket-client          0.58.0           py37haa95532_4
werkzeug                  2.2.2                    pypi_0    pypi
wheel                     0.37.1             pyhd3eb1b0_0
win_inet_pton             1.1.0            py37haa95532_0
wincertstore              0.2              py37haa95532_2
winpty                    0.4.3                         4
wrapt                     1.14.1                   pypi_0    pypi
xz                        5.2.8                h8cc25b3_0
zeromq                    4.3.4                hd77b12b_0
zipp                      3.11.0                   pypi_0    pypi
zlib                      1.2.13               h8cc25b3_0
zstd                      1.5.2                h19a0ad4_0

### 파일 설명
* 'data/' : 스마일 투저전략으로 추려낸 A, B, C, D 그룹의 동일가중방식 ETF 지수 가격 추이이다. 
* 'stock_selection/' :  스마일 투저전략으로 추려낸 A, B, C, D 그룹의 동일가중방식 ETF 지수 가격산정
* 'portfolio_val/' : 테스트 결과
* 'weights/' : train 했을 떄 weight 저장
* 'agent.py' : DQN 에이전트
* 'cudainstalltest.py' : gpu 연산을 위한 cuda 설정 체크
* 'envs.py' : 4개 ETF의 거래 enviroment
* 'model.py' : 다층 퍼셉트론
* 'run.py' : train, test를 실행하기 위한 파일
* 'utils.py' : ETF A, B, C, D 가져오고 간단한 전처리

### 학습방법
#### Train
'python run.py --mode train'
#### 포트폴리오 가치 저장
"python run.py --mode test --episode '원하는 숫자' --weights '위에 train을 통해 생성된 weight파일'"
